import{_ as r,C as t,c as P,o,a4 as s,G as i,j as a,a as e}from"./chunks/framework.C_GGjjHE.js";const b=JSON.parse('{"title":"五.2.DHCP协议","description":"","frontmatter":{},"headers":[],"relativePath":"views/study/ne/theory/五/2.DHCP协议.md","filePath":"views/study/ne/theory/五/2.DHCP协议.md","lastUpdated":1753862375000}'),p={name:"views/study/ne/theory/五/2.DHCP协议.md"};function C(d,l,D,H,u,g){const n=t("ImageViewer");return o(),P("div",null,[l[0]||(l[0]=s('<h1 id="五-2-dhcp协议" tabindex="-1">五.2.DHCP协议 <a class="header-anchor" href="#五-2-dhcp协议" aria-label="Permalink to &quot;五.2.DHCP协议&quot;">​</a></h1><h3 id="_1-基本概念" tabindex="-1">1.基本概念 <a class="header-anchor" href="#_1-基本概念" aria-label="Permalink to &quot;1.基本概念&quot;">​</a></h3><ul><li>DHCP是一种用于集中对用户IP地址进行动态管理和配置的协议</li><li>DHCP采用C/S(Client/Server，客户端/服务器)通信模式，协议报文基于UDP的方式进行交互，采用<span class="red">67(DHCP服务器)</span>和<span class="red">68(DHCP客户端)</span>两端口号</li><li>DHCP给运行服务器软件、且位置确定的计算机指派一个<span class="green">固定地址</span>，给运行客户端软件的计算机分配一个<span class="green">临时地址</span></li></ul><h3 id="_2-dhcp工作原理" tabindex="-1">2.DHCP工作原理 <a class="header-anchor" href="#_2-dhcp工作原理" aria-label="Permalink to &quot;2.DHCP工作原理&quot;">​</a></h3><ul><li>1.发现阶段：客户端DHCP DISCOVER(广播)</li><li>2.提供阶段：DHCP服务器DHCP OFFER(单播/广播)</li><li>3.请求阶段：客户端DHCP REQUEST(广播)</li><li>4.确认阶段：DHCP服务器DHCP ACK(单播/广播)</li></ul><h3 id="_3-dhcp报文格式" tabindex="-1">3.DHCP报文格式 <a class="header-anchor" href="#_3-dhcp报文格式" aria-label="Permalink to &quot;3.DHCP报文格式&quot;">​</a></h3>',6)),i(n,{src:"/blog/images/study/ne/DHCP报文格式.png",title:"DHCP报文格式"}),l[1]||(l[1]=s('<br><ul><li><span class="green">op(op code)</span>：表示报文类型，取值为1客户端请求或2服务器响应</li><li><span class="green">flags</span>：单播或者广播响应标志位，0单播，1广播</li><li><span class="green">claddr(client ip address)</span>：表示客户端的IP地址，初始化状态时没有IP地址，此字段为0.0.0.0</li><li><span class="green">yiaddr(your client ip address)</span>：服务器分配给客户端的IP地址</li><li><span class="green">siaddr(server ip address)</span>：DHCP客户端获得启动配置信息的服务器的IP地址</li><li><span class="green">giaddr(gateway ip address)</span>：表示第一个DHCP中继的IP地址</li><li><span class="green">file</span>：表示客户端需要获取的启动配置文件名</li><li><span class="green">options</span>：表示DHCP的选项字段</li></ul><h4 id="_1-options预定义选项字段" tabindex="-1">1.Options预定义选项字段 <a class="header-anchor" href="#_1-options预定义选项字段" aria-label="Permalink to &quot;1.Options预定义选项字段&quot;">​</a></h4><ul><li>DHCP报文中Options字段为可变长度字段，此字段包含了DHCP报文类型，服务器分配给终端的配置信息，如网关IP地址，DNS服务器的IP地址，客户端可以使用IP地址的有效租期等信息</li><li>Options字段由Type、Length和Value三部分组成。其中Type字段取值范围为1 ~ 255</li></ul>',4)),i(n,{src:"/blog/images/study/ne/Options预定义选项字段.png",title:"Options预定义选项字段"}),l[2]||(l[2]=a("br",null,null,-1)),l[3]||(l[3]=a("h4",{id:"_2-dhcp的报文类型",tabindex:"-1"},[e("2.DHCP的报文类型 "),a("a",{class:"header-anchor",href:"#_2-dhcp的报文类型","aria-label":'Permalink to "2.DHCP的报文类型"'},"​")],-1)),l[4]||(l[4]=a("ul",null,[a("li",null,"DHCP报文通过Options选项中的Type = 53来表示DHCP的报文类型。"),a("li",null,"当Type = 53，Length = 1，Value取值从01到08分别表示不同的DHCP报文类型")],-1)),i(n,{src:"/blog/images/study/ne/DHCP53报文类型.png",title:"DHCP53报文类型"}),l[5]||(l[5]=s('<br><h4 id="_3-常见-options自定义选项字段" tabindex="-1">3.常见 Options自定义选项字段 <a class="header-anchor" href="#_3-常见-options自定义选项字段" aria-label="Permalink to &quot;3.常见 Options自定义选项字段&quot;">​</a></h4><ul><li>Option 82 称为中继代理信息选项。</li><li><ul><li>Option 82（DHCP Relay Agent Information Option）称为中继代理信息选项，该选项记录了 DHCP Client 的位置信息。DHCP Snooping 设备或 DHCP Relay 通过在 DHCP 请求报文中添加 Option82 选项，将 DHCP Client 的位置信息传递给 DHCP Server，从而使得 DHCP Server 能够为主机分配合适的 IP 地址和其他配置信息，并实现对客户端的安全控制。</li></ul></li><li>Option 43 称为厂商特定信息选项。</li><li><ul><li>DHCP 服务器和 DHCP 客户端通过 Option 43 交换厂商特定的信息。当 DHCP 服务器接收到请求 Option 43 信息的 DHCP 请求报文（Option 55 中带有 Option 43 参数）后，将在回复报文中携带 Option 43，为 DHCP 客户端分配厂商指定的信息。</li></ul></li></ul><h3 id="_4-dhcp地址续租" tabindex="-1">4.DHCP地址续租 <a class="header-anchor" href="#_4-dhcp地址续租" aria-label="Permalink to &quot;4.DHCP地址续租&quot;">​</a></h3>',4)),i(n,{src:"/blog/images/study/ne/DHCP地址续租.png",title:"DHCP地址续租"}),l[6]||(l[6]=s('<br><ul><li>当租期达到 <span class="green">50%（T1）</span>时，DHCP 客户端会自动以<span class="green">单播</span>的方式向 DHCP 服务器发送 DHCP REQUEST 报文，请求更新 IP 地址租期。如果收到 DHCP 服务器回应的 DHCP ACK 报文，则租期更新成功。</li><li>当租期达到 <span class="green">87.5%（T2）</span>时，如果仍未收到 DHCP 服务器的应答，DHCP 客户端会自动以<span class="green">广播</span>的方式向 DHCP 服务器发送 DHCP REQUEST 报文，请求更新 IP 地址租期。如果收到 DHCP 服务器回应的 DHCP ACK 报文，则租期更新成功。</li><li>如果租期时间到时都没有收到服务器的回应，客户端停止使用此 IP 地址，重新发送 DHCP DISCOVER 报文请求新的 IP 地址。</li></ul><h3 id="_5-dhcp分配ip地址顺序" tabindex="-1">5.DHCP分配IP地址顺序 <a class="header-anchor" href="#_5-dhcp分配ip地址顺序" aria-label="Permalink to &quot;5.DHCP分配IP地址顺序&quot;">​</a></h3>',3)),i(n,{src:"/blog/images/study/ne/DHCP分配IP地址顺序.png",title:"DHCP分配IP地址顺序"}),l[7]||(l[7]=a("br",null,null,-1)),l[8]||(l[8]=a("p",null,[e("DHCP服务器按照如下次序为客户端选择IP地址："),a("br")],-1)),l[9]||(l[9]=a("ul",null,[a("li",null,"DHCP服务器的数据库中与客户端MAC地址静态绑定的IP地址"),a("li",null,"客户端以前曾经使用过的IP地址，即客户端发送的请求报文中请求IP地址选项的地址"),a("li",null,"在DHCP地址池中，顺序查找可供分配的空闲IP地址，最先找到的IP地址"),a("li",null,"如果在DHCP地址池中未找到可供分配的空闲IP地址，则依次查询超过租期、发生冲突的IP地址，如果找到可用的IP地址，则进行分配，否则报告错误")],-1)),l[10]||(l[10]=a("h3",{id:"_5-dhcp中继",tabindex:"-1"},[e("5.DHCP中继 "),a("a",{class:"header-anchor",href:"#_5-dhcp中继","aria-label":'Permalink to "5.DHCP中继"'},"​")],-1)),i(n,{src:"/blog/images/study/ne/DHCP中继.png",title:"DHCP中继"}),l[11]||(l[11]=a("br",null,null,-1)),l[12]||(l[12]=a("div",{class:"formula"},[e(" DHCP Server需要与中继网段"),a("span",{class:"key"},"路由可达")],-1)),l[13]||(l[13]=a("h3",{id:"_6-dhcp-snooping",tabindex:"-1"},[e("6.DHCP Snooping "),a("a",{class:"header-anchor",href:"#_6-dhcp-snooping","aria-label":'Permalink to "6.DHCP Snooping"'},"​")],-1)),l[14]||(l[14]=a("ul",null,[a("li",null,"防止网络中非法DHCP服务器分配IP地址，从而有效防范DHCP攻击")],-1)),i(n,{src:"/blog/images/study/ne/DHCP安全.png",title:"DHCP安全"}),l[15]||(l[15]=a("br",null,null,-1)),l[16]||(l[16]=a("h3",{id:"_7-dhcp基本配置",tabindex:"-1"},[e("7.DHCP基本配置 "),a("a",{class:"header-anchor",href:"#_7-dhcp基本配置","aria-label":'Permalink to "7.DHCP基本配置"'},"​")],-1)),i(n,{src:"/blog/images/study/ne/DHCP基本配置.png",title:"DHCP基本配置"}),l[17]||(l[17]=a("br",null,null,-1)),l[18]||(l[18]=a("h3",{id:"_8-dhcp中继配置",tabindex:"-1"},[e("8.DHCP中继配置 "),a("a",{class:"header-anchor",href:"#_8-dhcp中继配置","aria-label":'Permalink to "8.DHCP中继配置"'},"​")],-1)),i(n,{src:"/blog/images/study/ne/DHCP中继配置.png",title:"DHCP中继配置"}),l[19]||(l[19]=a("br",null,null,-1)),l[20]||(l[20]=a("h3",{id:"_9-dhcp安全配置",tabindex:"-1"},[e("9.DHCP安全配置 "),a("a",{class:"header-anchor",href:"#_9-dhcp安全配置","aria-label":'Permalink to "9.DHCP安全配置"'},"​")],-1)),i(n,{src:"/blog/images/study/ne/DHCP安全配置.png",title:"DHCP安全配置"}),l[21]||(l[21]=a("br",null,null,-1))])}const _=r(p,[["render",C]]);export{b as __pageData,_ as default};
