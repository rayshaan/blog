import{_ as e,C as r,c as p,o as h,b1 as t,G as n,j as i,a}from"./chunks/framework.w2ptJf3g.js";const E=JSON.parse('{"title":"七.2.NAT网络地址转换","description":"","frontmatter":{},"headers":[],"relativePath":"views/study/ne/theory/七/2.NAT网络地址转换.md","filePath":"views/study/ne/theory/七/2.NAT网络地址转换.md","lastUpdated":1758878470000}'),d={name:"views/study/ne/theory/七/2.NAT网络地址转换.md"};function k(o,s,u,g,A,b){const l=r("ImageViewer");return h(),p("div",null,[s[0]||(s[0]=t("",13)),n(l,{src:"/blog/images/study/ne/NAT技术原理.png",title:"NAT技术原理"}),s[1]||(s[1]=i("br",null,null,-1)),s[2]||(s[2]=i("h4",{id:"_1-静态nat原理",tabindex:"-1"},[a("1.静态NAT原理 "),i("a",{class:"header-anchor",href:"#_1-静态nat原理","aria-label":'Permalink to "1.静态NAT原理"'},"​")],-1)),s[3]||(s[3]=i("ul",null,[i("li",null,"静态NAT：每个私有地址都有一个与之对应并且固定的公有地址，即私有地址和公有地址直接的关系是一对一映射"),i("li",null,"支持双向互访：私有地址访问Internet经过出口设备NAT转换时，会被转换成对应的公有地址。同时，外部网络访问内部网络时，其报文中携带的公有地址(目的地址)也会被NAT设备转换成对应的私有地址")],-1)),n(l,{src:"/blog/images/study/ne/静态NAT原理.png",title:"静态NAT原理"}),s[4]||(s[4]=t("",7)),n(l,{src:"/blog/images/study/ne/静态NAT配置实例.png",title:"静态NAT配置实例"}),s[5]||(s[5]=i("br",null,null,-1)),s[6]||(s[6]=i("h4",{id:"_2-动态nat原理",tabindex:"-1"},[a("2.动态NAT原理 "),i("a",{class:"header-anchor",href:"#_2-动态nat原理","aria-label":'Permalink to "2.动态NAT原理"'},"​")],-1)),s[7]||(s[7]=i("ul",null,[i("li",null,[a("动态NAT：静态NAT严格地一对一进行地址映射，这就导致即便内网主机长时间离线或者不发送数据时，与之对应的公有地址也处于使用状态。为了避免地址浪费，动态NAT提出了地址池的概念：所有可用的"),i("span",{class:"brown"},"公有地址组成地址池")]),i("li",null,'当内部主机访问外部网络时临时分配一个地址池中未使用的地址，并将该地址标记为"In Use"。当该主机不再访问外部网络时回收分配的地址，重新标记为"Not Use"')],-1)),n(l,{src:"/blog/images/study/ne/动态NAT原理.png",title:"动态NAT原理"}),s[8]||(s[8]=t("",9)),n(l,{src:"/blog/images/study/ne/动态NAT配置实例.png",title:"动态NAT配置实例"}),s[9]||(s[9]=i("br",null,null,-1)),s[10]||(s[10]=i("h4",{id:"_3-napt技术原理",tabindex:"-1"},[a("3.NAPT技术原理 "),i("a",{class:"header-anchor",href:"#_3-napt技术原理","aria-label":'Permalink to "3.NAPT技术原理"'},"​")],-1)),s[11]||(s[11]=i("ul",null,[i("li",null,"动态NAT选择地址池中的地址进行地址转换时不会转换端口号，即No-PAT(No-Port Address Translation，非端口地址转换)，公有地址与私有地址还是1:1的映射关系，无法提高公有地址利用率"),i("li",null,"NAPT(Network Address and Port Translation，网络地址端口转换)：从地址池中选择地址进行地址转换时不仅转换IP地址，同事也会对端口号进行转换，从而实现公有地址与私有地址的1：n映射，可以有效提高公有地址利用率")],-1)),n(l,{src:"/blog/images/study/ne/NAPT技术原理.png",title:"NAPT技术原理"}),s[12]||(s[12]=i("br",null,null,-1)),s[13]||(s[13]=i("h5",{id:"示例-2",tabindex:"-1"},[a("示例 "),i("a",{class:"header-anchor",href:"#示例-2","aria-label":'Permalink to "示例"'},"​")],-1)),n(l,{src:"/blog/images/study/ne/NAPT配置示例.png",title:"NAPT配置示例"}),s[14]||(s[14]=i("br",null,null,-1)),s[15]||(s[15]=i("h4",{id:"_4-easy-ip",tabindex:"-1"},[a("4.Easy IP "),i("a",{class:"header-anchor",href:"#_4-easy-ip","aria-label":'Permalink to "4.Easy IP"'},"​")],-1)),s[16]||(s[16]=i("ul",null,[i("li",null,[a("Easy IP：实现原理和NAPT相同，同时转换IP地址、传输层端口，区别在于Easy IP没有地址池的概念，使用"),i("span",{class:"brown"},"接口地址"),a("作为NAT转换的公有地址")]),i("li",null,"Easy IP适用于不具备固定公网IP地址的场景：如通过DHCP、PPPoE拨号获取地址的私有网络出口，可以直接使用获取到的动态地址进行转换")],-1)),n(l,{src:"/blog/images/study/ne/EasyIP技术原理.png",title:"EasyIP技术原理"}),s[17]||(s[17]=i("br",null,null,-1)),s[18]||(s[18]=i("h5",{id:"示例-3",tabindex:"-1"},[a("示例 "),i("a",{class:"header-anchor",href:"#示例-3","aria-label":'Permalink to "示例"'},"​")],-1)),n(l,{src:"/blog/images/study/ne/EasyIP配置示例.png",title:"EasyIP配置示例"}),s[19]||(s[19]=i("br",null,null,-1)),s[20]||(s[20]=i("h4",{id:"_5-nat-server",tabindex:"-1"},[a("5.NAT Server "),i("a",{class:"header-anchor",href:"#_5-nat-server","aria-label":'Permalink to "5.NAT Server"'},"​")],-1)),s[21]||(s[21]=i("ul",null,[i("li",null,"NAT Server：指定[公有地址：端口]与[私有地址：端口]的一对一映射关系，将内网服务器映射到公网，当私有网络中的服务器需要对公网提供服务时使用"),i("li",null,"外网主机主动访问[公有地址：端口]实现对内网服务器的访问")],-1)),n(l,{src:"/blog/images/study/ne/NATServer.png",title:"NATServer"}),s[22]||(s[22]=i("br",null,null,-1)),s[23]||(s[23]=i("ul",null,[i("li",null,"外网主动访问内网时，NAT Server和NAT Static无差别"),i("li",null,"内网主动访问外网时，NAT Server仅做地址替换。NAT Static会同时替换地址和端口号")],-1)),s[24]||(s[24]=i("h5",{id:"示例-4",tabindex:"-1"},[a("示例 "),i("a",{class:"header-anchor",href:"#示例-4","aria-label":'Permalink to "示例"'},"​")],-1)),n(l,{src:"/blog/images/study/ne/NATServer配置示例.png",title:"NATServer配置示例.png"}),s[25]||(s[25]=i("br",null,null,-1)),s[26]||(s[26]=i("h4",{id:"_6-双向nat",tabindex:"-1"},[a("6.双向NAT "),i("a",{class:"header-anchor",href:"#_6-双向nat","aria-label":'Permalink to "6.双向NAT"'},"​")],-1)),s[27]||(s[27]=i("ul",null,[i("li",null,"双向NAT是指在转换过程中同时转换报文的源/目的IP地址。双向NAT不是一个单独的功能，而是源/NAT和目的NAT的组合"),i("li",null,[i("span",{class:"brown"},"双向NAT是针对同一条流，在其经过防火墙时同时转换报文的源地址和目的地址")])],-1)),n(l,{src:"/blog/images/study/ne/双向NAT.png",title:"双向NAT"}),s[28]||(s[28]=i("br",null,null,-1)),s[29]||(s[29]=i("h5",{id:"域间双向nat",tabindex:"-1"},[a("域间双向NAT "),i("a",{class:"header-anchor",href:"#域间双向nat","aria-label":'Permalink to "域间双向NAT"'},"​")],-1)),s[30]||(s[30]=i("p",null,[i("span",{class:"brown"},"当内网服务器未配置网关或去往外网的路由时"),a("：此时外网用户访问内网服务器时需要双向转换")],-1)),n(l,{src:"/blog/images/study/ne/域间NAT.png",title:"域间双向NAT"}),s[31]||(s[31]=i("br",null,null,-1)),s[32]||(s[32]=i("h5",{id:"域内双向nat",tabindex:"-1"},[a("域内双向NAT "),i("a",{class:"header-anchor",href:"#域内双向nat","aria-label":'Permalink to "域内双向NAT"'},"​")],-1)),s[33]||(s[33]=i("p",null,[i("span",{class:"brown"},"内网用户通过域名或公网IP访问内网服务器"),a("：此时内网用户访问内网服务器的数据流需要双向转换，源地址转换+NAT Server")],-1)),n(l,{src:"/blog/images/study/ne/域内双向NAT.png",title:"域内双向NAT"}),s[34]||(s[34]=i("br",null,null,-1)),s[35]||(s[35]=i("h3",{id:"_4-nat处理流程",tabindex:"-1"},[a("4.NAT处理流程 "),i("a",{class:"header-anchor",href:"#_4-nat处理流程","aria-label":'Permalink to "4.NAT处理流程"'},"​")],-1)),s[36]||(s[36]=i("p",null,"防火墙上针对不同的NAT类型会采用不同的NAT策略，具体处理流程如下：",-1)),n(l,{src:"/blog/images/study/ne/NAT处理流程.png",title:"NAT处理流程"}),s[37]||(s[37]=t("",6)),n(l,{src:"/blog/images/study/ne/NAT环路问题1.png",title:"NAT环路问题1"}),s[38]||(s[38]=i("br",null,null,-1)),s[39]||(s[39]=i("h4",{id:"环路问题2",tabindex:"-1"},[a("环路问题2 "),i("a",{class:"header-anchor",href:"#环路问题2","aria-label":'Permalink to "环路问题2"'},"​")],-1)),s[40]||(s[40]=i("p",null,"问题5.4",-1)),n(l,{src:"/blog/images/study/ne/NAT环路问题2.png",title:"NAT环路问题2"}),s[41]||(s[41]=i("br",null,null,-1)),s[42]||(s[42]=i("h3",{id:"_7-防火墙解决方案",tabindex:"-1"},[a("7.防火墙解决方案 "),i("a",{class:"header-anchor",href:"#_7-防火墙解决方案","aria-label":'Permalink to "7.防火墙解决方案"'},"​")],-1)),n(l,{src:"/blog/images/study/ne/防火墙解决方案.png",title:"防火墙解决方案"}),s[43]||(s[43]=i("br",null,null,-1))])}const N=e(d,[["render",k]]);export{E as __pageData,N as default};
