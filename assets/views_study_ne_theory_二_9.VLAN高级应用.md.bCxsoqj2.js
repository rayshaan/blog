import{_ as V,C as s,c as A,o as t,j as n,G as i,b1 as r,a as e}from"./chunks/framework.w2ptJf3g.js";const g=JSON.parse('{"title":"二.9.VLAN高级应用","description":"","frontmatter":{},"headers":[],"relativePath":"views/study/ne/theory/二/9.VLAN高级应用.md","filePath":"views/study/ne/theory/二/9.VLAN高级应用.md","lastUpdated":1753087294000}'),N={name:"views/study/ne/theory/二/9.VLAN高级应用.md"};function L(u,l,o,d,p,b){const a=s("ImageViewer");return t(),A("div",null,[l[0]||(l[0]=n("h1",{id:"二-9-vlan高级应用",tabindex:"-1"},[e("二.9.VLAN高级应用 "),n("a",{class:"header-anchor",href:"#二-9-vlan高级应用","aria-label":'Permalink to "二.9.VLAN高级应用"'},"​")],-1)),l[1]||(l[1]=n("h3",{id:"_1-vlan聚合",tabindex:"-1"},[e("1.VLAN聚合 "),n("a",{class:"header-anchor",href:"#_1-vlan聚合","aria-label":'Permalink to "1.VLAN聚合"'},"​")],-1)),l[2]||(l[2]=n("ul",null,[n("li",null,"在一般的三层交换机中，通常是采用一个VLAN对应一个三层逻辑接口的方式实现广播域之间的互通，这样导致了IP地址的浪费"),n("li",null,"VLAN Aggregation技术(也成为Super VLAN，即VLAN聚合)就是在一个物理网络内，用多个VLAN隔离广播域，使不同的VLAN属于同一个子网"),n("li",null,"Super-VLAN：只建立三层接口"),n("li",null,"Sub-VLAN：只包含物理端口")],-1)),i(a,{src:"/blog/images/study/ne/VLAN聚合.png",title:"VLAN聚合"}),l[3]||(l[3]=n("br",null,null,-1)),l[4]||(l[4]=n("h4",{id:"vlan聚合配置命令",tabindex:"-1"},[e("VLAN聚合配置命令 "),n("a",{class:"header-anchor",href:"#vlan聚合配置命令","aria-label":'Permalink to "VLAN聚合配置命令"'},"​")],-1)),l[5]||(l[5]=n("ul",null,[n("li",null,"1.创建Super-VLAN，并将Sub-VLAN加入Super-VLAN"),n("li",null,"2.创建Super-VLAN对应的VLANIF接口，并配置IP地址"),n("li",null,"3.使能VLAN间ARP代理功能(可选)"),n("li",null,[n("ul",null,[n("li",null,"功能：使子VLAN之间能互相通信")])])],-1)),i(a,{src:"/blog/images/study/ne/VLAN聚合配置命令.png",title:"VLAN聚合配置命令"}),l[6]||(l[6]=r('<br><h3 id="_2-mux-vlan" tabindex="-1">2.MUX VLAN <a class="header-anchor" href="#_2-mux-vlan" aria-label="Permalink to &quot;2.MUX VLAN&quot;">​</a></h3><ul><li>MUX VLAN(Multiplex VLAN)提供了一种通过VLAN进行网络资源控制的机制，做一个主VLAN可以和子VLAN通信，但是子VLAN之间不能互相通信</li><li>分为<span class="green">Principal VLAN</span>和<span class="green">Subordinate VLAN</span></li><li>Subordinate VLAN又分为<span class="brown">Separate VLAN</span>和<span class="brown">Group VLAN</span></li></ul>',3)),i(a,{src:"/blog/images/study/ne/MUXVLAN.png",title:"MUXVLAN"}),l[7]||(l[7]=n("br",null,null,-1)),l[8]||(l[8]=n("h4",{id:"mux-vlan配置命令",tabindex:"-1"},[e("MUX VLAN配置命令 "),n("a",{class:"header-anchor",href:"#mux-vlan配置命令","aria-label":'Permalink to "MUX VLAN配置命令"'},"​")],-1)),l[9]||(l[9]=n("ul",null,[n("li",null,"1.配置MUX VLAN，将VLAN2配置成主VLAN，VLAN3配置成互通型从VLAN，VLAN4配置成隔离型从VLAN"),n("li",null,"2.配置接口加入VLAN，并在接口下使能MUX VLAN功能，并开启ARP代理(可选)")],-1)),i(a,{src:"/blog/images/study/ne/MUXVLAN配置命令.png",title:"MUXVLAN配置命令"}),l[10]||(l[10]=n("br",null,null,-1)),l[11]||(l[11]=n("h3",{id:"_3-qinq",tabindex:"-1"},[e("3.QinQ "),n("a",{class:"header-anchor",href:"#_3-qinq","aria-label":'Permalink to "3.QinQ"'},"​")],-1)),l[12]||(l[12]=n("ul",null,[n("li",null,"QinQ(802.1Q-in-802.1Q)技术是一项扩展VLAN空间的技术，也叫做VLAN Stacking或Double VLAN，通过在802.1Q标签报文的基础上再增加一层802.1Q Tag来达到拓展VLAN空间的功能。"),n("li",null,[e("QinQ分为"),n("span",{class:"brown"},"基本QinQ"),e("和"),n("span",{class:"brown"},"灵活QinQ")])],-1)),i(a,{src:"/blog/images/study/ne/QinQ.png",title:"QinQ"}),l[13]||(l[13]=n("br",null,null,-1)),l[14]||(l[14]=n("h4",{id:"基本qinq配置命令",tabindex:"-1"},[e("基本QinQ配置命令 "),n("a",{class:"header-anchor",href:"#基本qinq配置命令","aria-label":'Permalink to "基本QinQ配置命令"'},"​")],-1)),l[15]||(l[15]=n("ul",null,[n("li",null,"1.在PE1上创建VLAN100和VLAN200"),n("li",null,"2.在PE1上配置接口10GE1/0/1、10GE1/0/2的类型为QinQ")],-1)),i(a,{src:"/blog/images/study/ne/基本QinQ配置命令.png",title:"基本QinQ配置命令"}),l[16]||(l[16]=r('<br><h3 id="_4-vlan内二层隔离" tabindex="-1">4.VLAN内二层隔离 <a class="header-anchor" href="#_4-vlan内二层隔离" aria-label="Permalink to &quot;4.VLAN内二层隔离&quot;">​</a></h3><p>华为提供了一些VLAN内二层隔离技术，如端口隔离、MUX VLAN和基于流策略的VLAN内二层隔离等</p><ul><li>端口隔离可实现同一VLAN内端口之间的隔离。<span class="green">用户只需要将端口加入到隔离组中，就可以实现隔离组内端口之间的二层隔离</span></li><li>MUX VLAN(Multiplex VLAN)提供了一种通过VLAN进行网络资源控制的机制。它既可实现VLAN间用户通信，也可实现VLAN内的用户相互隔离</li><li>基于流策略(<span class="green">MQC</span>)的VLAN内二层隔离指用户可以根据匹配规则对报文进行流分类，然后通过流策略将流分类与permit/deny动作相关联，使符合流分类的报文被允许或被禁止通过，从而实现灵活的VLAN内单向或双向隔离。</li></ul><h4 id="端口隔离配置命令" tabindex="-1">端口隔离配置命令 <a class="header-anchor" href="#端口隔离配置命令" aria-label="Permalink to &quot;端口隔离配置命令&quot;">​</a></h4><ul><li>1.配置vlan 2中的确1口与2口二层隔离</li><li>2.配置vlanif 2接口ARP代理实现三层互通</li></ul>',6)),i(a,{src:"/blog/images/study/ne/VLAN端口隔离配置命令.png",title:"VLAN端口隔离配置命令"}),l[17]||(l[17]=r('<br><h3 id="_5-gvrp协议" tabindex="-1">5.GVRP协议 <a class="header-anchor" href="#_5-gvrp协议" aria-label="Permalink to &quot;5.GVRP协议&quot;">​</a></h3><ul><li>GARP(Generic Attribute Registration Protocol)通用属性注册协议，GARP作为一个属性注册协议的载体，可以用来传播属性</li><li><span class="green">GVRP(Generic VLAN Registration Protocol)</span>是GARP的一种应用，用户注册和注销VLAN属性</li><li><span class="brown">GVRP的目的是为了放行某些VLAN，而不是为了在本地添加成员端口</span>。</li><li>GVRP特性使得不同设备上的VLAN信息可以由协议动态维护和更新，用户<span class="brown">只需要对少数设备进行VLAN配置</span>即可应用到整个交换网络。</li><li><ul><li>如下图所示，所有设备都能使用GVRP功能，设备之间相连的端口均为Trunk端口，并允许所有VLAN通过</li></ul></li><li><ul><li>只需在SWA和SWC上分别手工配置静态VLAN100 ~ VLAN1000，设备SWB就可以通过GVRP协议学习到这些VLAN，最后各设备上都存在VLAN100 ~ 1000</li></ul></li></ul>',3)),i(a,{src:"/blog/images/study/ne/GVRP协议示例.png",title:"GVRP协议示例"}),l[18]||(l[18]=r('<br><h4 id="gvrp三种注册模式" tabindex="-1">GVRP三种注册模式 <a class="header-anchor" href="#gvrp三种注册模式" aria-label="Permalink to &quot;GVRP三种注册模式&quot;">​</a></h4><p>手工配置的VLAN成为<span class="brown">静态VLAN</span>，通过GVRP协议创建的VLAN成为<span class="brown">动态VLAN</span>。GVRP有三种注册模式，不同的模式对静态VLAN和动态VLAN的处理方式也不同。GVRP的三种注册模式分别定义如下</p><ul><li><span class="green">Normal模式</span>：允许动态VLAN在端口上进行注册，同时会发生静态VLAN和动态VLAN的声明消息</li><li><span class="green">Fixed模式</span>：不允许动态VLAN在端口上注册，只发送静态VLAN的声明消息</li><li><span class="green">Forbidden模式</span>：不允许动态VLAN在端口上进行注册，同时删除端口上除了VLAN1外的所有VLAN，只发送VLAN1的声明消息</li></ul><h4 id="gvrp一般配置示例" tabindex="-1">GVRP一般配置示例 <a class="header-anchor" href="#gvrp一般配置示例" aria-label="Permalink to &quot;GVRP一般配置示例&quot;">​</a></h4>',5)),i(a,{src:"/blog/images/study/ne/GVRP一般配置示例.png",title:"GVRP一般配置示例"}),l[19]||(l[19]=n("br",null,null,-1)),l[20]||(l[20]=n("h3",{id:"_6-vxlan",tabindex:"-1"},[e("6.VXLAN "),n("a",{class:"header-anchor",href:"#_6-vxlan","aria-label":'Permalink to "6.VXLAN"'},"​")],-1)),l[21]||(l[21]=n("ul",null,[n("li",null,"VXLAN(Virtual eXtensible Local Area Network)虚拟扩展局域网，采用MAC in UDP封装方式，是NVO3(Network Virtualization over Layer 3)中的一种网络虚拟化技术"),n("li",null,"通过VXLAN，虚拟网络可接入大量租户，且租户可以规划自己的虚拟网络，不需要考虑物理网络IP地址和广播域的限制，降低了网络管理的难度"),n("li",null,"常见的配置方式：静态VXLAN、动态VXLAN(BGP EVPN)")],-1)),i(a,{src:"/blog/images/study/ne/VXLAN.png",title:"VXLAN"}),l[22]||(l[22]=r('<br><h4 id="vxlan网络中基本概念" tabindex="-1">VXLAN网络中基本概念 <a class="header-anchor" href="#vxlan网络中基本概念" aria-label="Permalink to &quot;VXLAN网络中基本概念&quot;">​</a></h4><ul><li>网络标识VNI(VXLAN Network Identifier)</li><li><ul><li>类似于传统网络中的VLAN ID，用于区分VXLAN段，不同VXLAN段的租户不能之间进行二层通信。一个租户可以有一个或者多个VNI，VNI由24比特组成，支持多大16M的租户</li></ul></li><li>广播域BD(Bridge Domain)</li><li><ul><li>类似传统网络中采用VLAN划分广播域方法，在VXLAN网络中通过BD划分广播域</li></ul></li><li><ul><li>在VXLAN网络中，将VNI以1:1方式映射到广播域BD，一个BD就表示着一个广播域，同一个BD内的主机就可以进行二层互通</li></ul></li><li>VXLAN隧道端点VTEP(VXLAN Tunnel Endpoints)</li><li>虚拟接入点VAP(Virtual Access Point)</li><li>网络虚拟边缘NVE(Network Virtualization Edge)</li></ul><h4 id="vxlan报文封装" tabindex="-1">VXLAN报文封装 <a class="header-anchor" href="#vxlan报文封装" aria-label="Permalink to &quot;VXLAN报文封装&quot;">​</a></h4><p>原始报文在封装过程中先被添加一个VXLAN帧头，再被封装在UDP报文中，并使用承载网络的IP、MAC地址作为外层头进行封装</p>',5)),i(a,{src:"/blog/images/study/ne/VXLAN报文封装.png",title:"VXLAN报文封装"}),l[23]||(l[23]=n("br",null,null,-1)),l[24]||(l[24]=n("h3",{id:"_7-vxlan和vlan对比",tabindex:"-1"},[e("7.VXLAN和VLAN对比 "),n("a",{class:"header-anchor",href:"#_7-vxlan和vlan对比","aria-label":'Permalink to "7.VXLAN和VLAN对比"'},"​")],-1)),i(a,{src:"/blog/images/study/ne/VXLAN和VLAN对比.png",title:"VXLAN和VLAN对比"}),l[25]||(l[25]=n("br",null,null,-1))])}const m=V(N,[["render",L]]);export{g as __pageData,m as default};
